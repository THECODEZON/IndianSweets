(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{3005:function(e,s,t){Promise.resolve().then(t.bind(t,8510))},8510:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(7437),a=t(2265),l=t(7138),n=t(3429),c=t(1066);let i=(0,c.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var d=t(7524),o=t(5880),m=t(5862);let x=(0,c.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=()=>{let{user:e}=(0,n.a)(),[s,t]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let s=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("http://localhost:5001/api/orders/myorders",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();t(e.data)}else console.error("Failed to fetch orders")}catch(e){console.error("Error fetching orders:",e)}finally{u(!1)}};e?s():u(!1)},[e]);let h=e=>{switch(e){case"Placed":return(0,r.jsx)(i,{size:20,className:"text-blue-500"});case"Processing":return(0,r.jsx)(d.Z,{size:20,className:"text-yellow-500"});case"Shipped":return(0,r.jsx)(o.Z,{size:20,className:"text-purple-500"});case"Delivered":return(0,r.jsx)(m.Z,{size:20,className:"text-green-500"});case"Cancelled":return(0,r.jsx)(x,{size:20,className:"text-red-500"});default:return(0,r.jsx)(i,{size:20,className:"text-gray-500"})}},p=e=>{switch(e){case"Placed":return"bg-blue-100 text-blue-800";case"Processing":return"bg-yellow-100 text-yellow-800";case"Shipped":return"bg-purple-100 text-purple-800";case"Delivered":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?c?(0,r.jsx)("div",{className:"min-h-screen bg-bg-cream py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-maroon mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading your orders..."})]})})}):0===s.length?(0,r.jsx)("div",{className:"min-h-screen bg-bg-cream py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(d.Z,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Orders Yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"You haven't placed any orders yet. Start shopping!"}),(0,r.jsx)(l.default,{href:"/sweets",className:"bg-primary-maroon text-white px-8 py-3 rounded-full font-bold hover:bg-primary-green transition-colors",children:"Browse Sweets"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-bg-cream py-12",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif font-bold text-primary-maroon mb-8",children:"My Orders"}),(0,r.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-gray-800",children:["Order #",e._id.slice(-8)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mt-3 md:mt-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ".concat(p(e.status)),children:[h(e.status),(0,r.jsx)("span",{children:e.status})]}),e.isPaid&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Paid"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Order Items"}),(0,r.jsx)("div",{className:"space-y-3",children:e.orderItems.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e.image&&(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded-lg",onError:e=>{e.currentTarget.src="/images/default-sweet.jpg"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",e.qty," \xd7 ₹",e.price]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"font-bold text-primary-maroon",children:["₹",e.price*e.qty]})})]},s))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Shipping Address"}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,r.jsxs)("p",{className:"text-gray-700",children:[e.shippingAddress.addressLine1,(0,r.jsx)("br",{}),e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.postalCode,(0,r.jsx)("br",{}),"\uD83D\uDCDE ",e.shippingAddress.phone]})})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Payment Method: ",(0,r.jsx)("span",{className:"font-medium",children:e.paymentMethod})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Items: ₹",e.itemsPrice]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Shipping: ",0===e.shippingPrice?"FREE":"₹".concat(e.shippingPrice)]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-lg font-bold text-primary-maroon",children:["Total: ₹",e.totalPrice]})})]})})]},e._id))}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsx)(l.default,{href:"/sweets",className:"text-primary-green font-bold hover:underline",children:"← Continue Shopping"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-bg-cream py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(d.Z,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please Login to View Orders"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to view your order history."}),(0,r.jsx)(l.default,{href:"/login",className:"bg-primary-maroon text-white px-8 py-3 rounded-full font-bold hover:bg-primary-green transition-colors",children:"Login"})]})})})}},3429:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return d},a:function(){return i}});var r=t(7437),a=t(2265),l=t(6463),n=t(9868);let c=(0,a.createContext)({user:null,login:async()=>{},register:async()=>{},logout:()=>{},error:null}),i=()=>(0,a.useContext)(c),d=e=>{let{children:s}=e,[t,i]=(0,a.useState)(null),[d,o]=(0,a.useState)(null),m=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("userInfo");e&&i(JSON.parse(e))},[]);let x=async e=>{try{o(null);let s=(await n.Z.post("/users/login",e)).data;i(s),localStorage.setItem("userInfo",JSON.stringify(s)),m.push("/")}catch(e){var s,t;o((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Login failed")}},u=async e=>{try{o(null);let s=(await n.Z.post("/users",e)).data;i(s),localStorage.setItem("userInfo",JSON.stringify(s)),m.push("/")}catch(e){var s,t;o((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Registration failed")}};return(0,r.jsx)(c.Provider,{value:{user:t,login:x,register:u,logout:()=>{i(null),localStorage.removeItem("userInfo"),m.push("/login")},error:d},children:s})}},1066:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(e,s)=>{let t=(0,r.forwardRef)((t,n)=>{let{color:c="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:o,children:m,...x}=t;return(0,r.createElement)("svg",{ref:n,...a,width:i,height:i,stroke:c,strokeWidth:o?24*Number(d)/Number(i):d,className:"lucide lucide-".concat(l(e)),...x},[...s.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...(Array.isArray(m)?m:[m])||[]])});return t.displayName="".concat(e),t}},5862:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(1066).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7524:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(1066).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},5880:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(1066).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},6463:function(e,s,t){"use strict";var r=t(1169);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},9868:function(e,s,t){"use strict";let r=t(8472).Z.create({baseURL:"http://localhost:5001/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let s=localStorage.getItem("userInfo");if(s){let t=JSON.parse(s).token;e.headers.Authorization="Bearer ".concat(t)}return e},e=>Promise.reject(e)),s.Z=r}},function(e){e.O(0,[138,472,971,23,744],function(){return e(e.s=3005)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{470:function(e,r,a){Promise.resolve().then(a.bind(a,1039))},1039:function(e,r,a){"use strict";a.r(r);var t=a(7437),n=a(2265),o=a(3429),s=a(7138);r.default=()=>{let[e,r]=(0,n.useState)(""),[a,l]=(0,n.useState)(""),[i,u]=(0,n.useState)(""),[d,c]=(0,n.useState)(!1),{register:m,error:p}=(0,o.a)(),f=async r=>{if(r.preventDefault(),!e||!a||!i){alert("Please fill in all fields");return}c(!0);try{await m({name:e,email:a,password:i})}catch(e){console.error("Registration error:",e)}finally{c(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-bg-beige py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-primary-maroon",children:"Create your account"})}),p&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:p}),(0,t.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:f,children:[(0,t.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,t.jsx)("div",{children:(0,t.jsx)("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-maroon focus:border-primary-maroon focus:z-10 sm:text-sm",placeholder:"Full Name",value:e,onChange:e=>r(e.target.value),disabled:d})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{id:"email-address",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-primary-maroon focus:border-primary-maroon focus:z-10 sm:text-sm",placeholder:"Email address",value:a,onChange:e=>l(e.target.value),disabled:d})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-maroon focus:border-primary-maroon focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:e=>u(e.target.value),disabled:d})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-maroon hover:bg-primary-green focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-maroon disabled:opacity-50",children:d?"Creating account...":"Sign up"})})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account? ",(0,t.jsx)(s.default,{href:"/login",className:"font-medium text-primary-maroon hover:text-primary-green",children:"Login"})]})})]})})}},3429:function(e,r,a){"use strict";a.d(r,{AuthProvider:function(){return u},a:function(){return i}});var t=a(7437),n=a(2265),o=a(6463),s=a(9868);let l=(0,n.createContext)({user:null,login:async()=>{},register:async()=>{},logout:()=>{},error:null}),i=()=>(0,n.useContext)(l),u=e=>{let{children:r}=e,[a,i]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),c=(0,o.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("userInfo");e&&i(JSON.parse(e))},[]);let m=async e=>{try{d(null);let r=(await s.Z.post("/users/login",e)).data;i(r),localStorage.setItem("userInfo",JSON.stringify(r)),c.push("/")}catch(e){var r,a;d((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Login failed")}},p=async e=>{try{d(null);let r=(await s.Z.post("/users",e)).data;i(r),localStorage.setItem("userInfo",JSON.stringify(r)),c.push("/")}catch(e){var r,a;d((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Registration failed")}};return(0,t.jsx)(l.Provider,{value:{user:a,login:m,register:p,logout:()=>{i(null),localStorage.removeItem("userInfo"),c.push("/login")},error:u},children:r})}},6463:function(e,r,a){"use strict";var t=a(1169);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},9868:function(e,r,a){"use strict";let t=a(8472).Z.create({baseURL:"http://localhost:5001/api",headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{let r=localStorage.getItem("userInfo");if(r){let a=JSON.parse(r).token;e.headers.Authorization="Bearer ".concat(a)}return e},e=>Promise.reject(e)),r.Z=t}},function(e){e.O(0,[138,472,971,23,744],function(){return e(e.s=470)}),_N_E=e.O()}]);